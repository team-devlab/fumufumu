# [ADR] フロントエンドの型定義における継承（extends）の採用方針

* **Status**: Accepted
* **Date**: 2026-01-31
* **Context**:
  * APIレスポンスの型定義において、「一覧取得用（List）」と「詳細取得用（Detail）」のように、包含関係にあるデータ構造を扱う頻度が高い。
  * これらを定義する際、「Interfaceの継承（extends）」、「交差型（Intersection Types / &）」、「重複定義」のいずれを採用するか統一する必要があった。
  
* **Decision**:
  * 包含関係（Is-A関係）にある型定義に関しては、**Interfaceの継承（extends）** を採用する。
  * 例: `interface ConsultationDetail extends Consultation { ... }`

* **Comparison of Approaches**:
  * 以下の比較検討に基づき、パフォーマンスとメンテ性のバランスが良い `extends` を採用した。

| 特徴 | ① Interface継承 (`extends`) | ② 交差型 (`type` & `&`) | ③ 完全分離 (共通化なし) |
| :--- | :--- | :--- | :--- |
| **構文** | `interface B extends A {}` | `type B = A & {}` | 個別に定義 |
| **コンパイル速度** | **◎ 速い** (キャッシュされる) | △ 遅くなる傾向 (再計算される) | ◎ 速い |
| **エラーメッセージ** | **◎ わかりやすい** (名前で出る) | △ 冗長 (A & B property missing...) | ◎ わかりやすい |
| **柔軟性** | △ 階層構造が必要 | **◎ 柔軟** (複数の型を合成可) | ◎ 自由 |
| **上書き (Override)** | ✖ 互換性のない型への変更不可 | ◯ 無理やり合成される (neverになる場合も) | ◎ 自由 |
| **メンテ性 (DRY)** | ◎ 共通項の修正が1箇所で済む | ◎ 共通項の修正が1箇所で済む | ✖ 重複修正が必要 |
| **用途** | 明確な親子・包含関係がある時 | 既存の型を組み合わせたい時 (Mixins) | 全く別のデータ構造の時 |

* **Consequences (Merit/Demerit)**:
  * **Merit**:
    * 共通プロパティの定義を一箇所で管理できる（DRY原則）。
    * エラーメッセージが交差型（&）に比べてシンプルで分かりやすい。
    * 詳細データ型を一覧データ型として扱う際（互換性）の安全性が保証される。
    * TypeScriptのコンパイルパフォーマンスにおいて有利。
  * **Demerit**:
    * 親インターフェースのプロパティの型を、子インターフェースで互換性のない型に上書きすることはできない（設計上の制約として許容する）。

* **Alternatives Considered**:
  * **交差型 (Type Alias & Intersection)**: 柔軟だが、エラーメッセージが冗長になりやすく、意図しない `never` 型の生成リスクがあるため不採用。
  * **完全分離**: 変更の自由度は高いが、プロパティの同期漏れによるバグのリスクが高いため不採用。